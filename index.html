<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denzzy Store - Beranda</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f8f8; /* Latar belakang abu-abu sangat muda */
            color: #333; /* Warna teks utama */
        }
        /* Style untuk splash screen */
        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #1a202c; /* Warna latar belakang gelap */
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999; /* Pastikan di atas semua elemen lain */
            opacity: 1;
            transition: opacity 0.5s ease-out; /* Transisi untuk fade out, dipercepat */
        }
        #splash-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }
        /* Style untuk overlay menu mobile */
        .mobile-menu-overlay {
            transition: transform 0.3s ease-in-out;
            transform: translateX(100%); /* Sembunyikan di luar layar */
        }
        .mobile-menu-overlay.active {
            transform: translateX(0); /* Tampilkan di layar */
        }
        /* Mengatur scroll behavior untuk smooth scroll */
        html {
            scroll-behavior: smooth;
        }
        /* Styling untuk bintang rating */
        .star-rating .star {
            cursor: pointer;
            color: #ccc; /* Warna default bintang */
            transition: color 0.2s ease-in-out;
        }
        .star-rating .star.filled {
            color: #ffc107; /* Warna bintang yang terisi */
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">
    <div id="splash-screen">
        <h1 class="text-5xl font-extrabold mb-4 animate-pulse">Denzzy Store</h1>
        <p class="text-lg">Memuat pengalaman belanja terbaik...</p>
        <div class="mt-8 animate-spin rounded-full h-12 w-12 border-b-2 border-white"></div>
    </div>

    <header class="bg-white shadow-sm py-4 px-6 md:px-8 lg:px-12 rounded-b-lg">
        <div class="container mx-auto flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-gray-800 hover:text-gray-600 transition duration-300">
                Denzzy Store
            </a>
            <div class="flex items-center space-x-4">
                <nav class="hidden md:flex space-x-6">
                    <a href="#" class="text-gray-600 hover:text-blue-600 transition duration-300 font-medium desktop-nav-link">Beranda</a>
                    <a href="#products" class="text-gray-600 hover:text-blue-600 transition duration-300 font-medium desktop-nav-link">Produk</a>
                    <a href="#benefits" class="text-gray-600 hover:text-blue-600 transition duration-300 font-medium desktop-nav-link">Keuntungan</a>
                    <a href="#payment" class="text-gray-600 hover:text-blue-600 transition duration-300 font-medium desktop-nav-link">Pembayaran</a>
                    <a href="#qris-payment-section" class="text-gray-600 hover:text-blue-600 transition duration-300 font-medium desktop-nav-link">QRIS</a>
                    <a href="cart.html" id="desktop-cart-link" class="text-gray-600 hover:text-blue-600 transition duration-300 font-medium">Keranjang</a>
                </nav>

                <a href="cart.html" id="cart-icon" class="text-gray-600 hover:text-blue-600 transition duration-300 focus:outline-none" aria-label="Keranjang Belanja">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                </a>

                <button id="mobile-menu-button" class="md:hidden text-gray-600 focus:outline-none" aria-label="Buka Menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <div id="mobile-menu-overlay" class="mobile-menu-overlay fixed inset-0 bg-gray-900 bg-opacity-95 z-50 flex flex-col items-center justify-center hidden">
        <button id="close-mobile-menu" class="absolute top-4 right-4 text-white text-3xl focus:outline-none" aria-label="Tutup Menu">
            &times;
        </button>
        <nav class="flex flex-col space-y-6 text-2xl">
            <a href="#" class="text-white hover:text-blue-400 transition duration-300 font-medium mobile-nav-link">Beranda</a>
            <a href="#products" class="text-white hover:text-blue-400 transition duration-300 font-medium mobile-nav-link">List Produk</a>
            <a href="#benefits" class="text-white hover:text-blue-400 transition duration-300 font-medium mobile-nav-link">Keuntungan</a>
            <a href="#payment" class="text-white hover:text-blue-400 transition duration-300 font-medium mobile-nav-link">Pembayaran</a>
            <a href="cart.html" id="mobile-cart-link" class="text-white hover:text-blue-400 transition duration-300 font-medium">Keranjang</a>
        </nav>
    </div>

    <section class="relative bg-gradient-to-r from-blue-600 to-purple-600 text-white py-20 md:py-28 lg:py-36 rounded-b-xl overflow-hidden">
        <div class="absolute inset-0 bg-cover bg-center opacity-20" style="background-image: url('https://upload.wikimedia.org/wikipedia/commons/e/e0/Alight_Motion_Logo.png');"></div>
        <div class="container mx-auto text-center relative z-10 px-4">
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-extrabold mb-4 leading-tight">
                Jasa Editing Logo Video Profesional
            </h1>
            <p class="text-lg md:text-xl mb-8 max-w-2xl mx-auto">
                Wujudkan logo video impian Anda dengan sentuhan Alight Motion yang dinamis dan memukau.
            </p>
            <button class="bg-white text-blue-600 hover:bg-blue-100 font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
                Lihat Portofolio
            </button>
        </div>
    </section>

    <section class="bg-white py-16 md:py-20 rounded-xl shadow-lg mx-auto container -mt-16 md:-mt-24 relative z-20 px-6 md:px-8 lg:px-10">
        <div class="text-center max-w-3xl mx-auto">
            <h2 class="text-3xl font-bold text-blue-700 mb-6">Mengapa Memilih Denzzy Store?</h2>
            <p class="text-gray-700 leading-relaxed text-lg">
                Di Denzzy Store, kami berkomitmen untuk menyediakan produk-produk berkualitas tinggi yang tidak hanya memenuhi harapan Anda, tetapi juga melebihi ekspektasi. Kami percaya pada inovasi, desain yang menawan, dan pengalaman berbelanja yang mulus. Setiap item di koleksi kami dipilih dengan cermat untuk memastikan Anda mendapatkan yang terbaik.
            </p>
            <p class="text-gray-700 leading-relaxed text-lg mt-4">
                Prioritas kami adalah kepuasan pelanggan, didukung oleh layanan yang ramah dan proses transaksi yang aman. Bergabunglah dengan ribuan pelanggan puas lainnya dan rasakan perbedaannya!
            </p>
        </div>
    </section>

    <section id="benefits" class="container mx-auto p-6 md:p-8 lg:p-10 mt-12">
        <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Keuntungan Berbelanja di Denzzy Store</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="bg-white p-6 rounded-xl shadow-md text-center transform transition duration-300 hover:scale-105 hover:shadow-xl">
                <div class="text-blue-600 mb-4">
                    <svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">Produk Berkualitas Tinggi</h3>
                <p class="text-gray-600">Kami hanya menyediakan produk terbaik yang telah melalui seleksi ketat untuk menjamin kualitas.</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-md text-center transform transition duration-300 hover:scale-105 hover:shadow-xl">
                <div class="text-blue-600 mb-4">
                    <svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">Pengiriman Cepat & Aman</h3>
                <p class="text-gray-600">Pesanan Anda akan diproses dan dikirim dengan cepat serta aman sampai tujuan.</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-md text-center transform transition duration-300 hover:scale-105 hover:shadow-xl">
                <div class="text-blue-600 mb-4">
                    <svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2H7a2 2 0 01-2-2V6a2 2 0 012-2h2m0 0V3a1 1 0 011-1h2a1 1 0 011 1v1m-4 10h4m-4 4h.01"></path></svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">Layanan Pelanggan Responsif</h3>
                <p class="text-gray-600">Tim kami siap membantu Anda dengan pertanyaan atau masalah apa pun.</p>
            </div>
        </div>
    </section>

    <main id="products" class="container mx-auto p-6 md:p-8 lg:p-10 flex-grow mt-12">
        <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Produk Terbaru Kami</h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            <div class="bg-white rounded-xl shadow-lg overflow-hidden transform transition duration-300 hover:scale-105 hover:shadow-xl">
                <img src="https://i.postimg.cc/BZR1YFbq/produk1.jpg" alt="Jasa Edit Logo Video" class="w-full h-48 object-cover">
                <div class="p-5">
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Jasa Edit Logo Video</h3>
                    <p class="text-gray-600 text-sm mb-3">Menggunakan Elemen Yang Dapat Membuat Logo Anda Menjadi Lebih Bergerak</p>
                    <div class="flex items-center justify-center text-yellow-400 text-2xl mb-2 star-rating" data-rating="0">
                        <span class="star" data-value="1">&#9733;</span>
                        <span class="star" data-value="2">&#9733;</span>
                        <span class="star" data-value="3">&#9733;</span>
                        <span class="star" data-value="4">&#9733;</span>
                        <span class="star" data-value="5">&#9733;</span>
                    </div>
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-2xl font-bold text-blue-600">Rp 30.000</span>
                        <span class="text-sm text-gray-500 line-through">Rp 50.000</span>
                    </div>
                    <p class="text-green-600 font-semibold text-sm mb-2">Produk Tersisa 99+</p>
                    <button class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300 font-medium add-to-cart-button"
                            data-product-id="prod001"
                            data-product-name="Jasa Edit Logo Video"
                            data-product-price="30000"
                            data-product-image="https://i.postimg.cc/BZR1YFbq/produk1.jpg">
                        Tambah ke Keranjang
                    </button>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg overflow-hidden transform transition duration-300 hover:scale-105 hover:shadow-xl">
                <img src="https://placehold.co/600x400/D1E7DD/000000?text=Kosong" alt="Kosong 1" class="w-full h-48 object-cover">
                <div class="p-5">
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Kosong 1</h3>
                    <p class="text-gray-600 text-sm mb-3">-----</p>
                    <div class="flex items-center justify-center text-yellow-400 text-2xl mb-2 star-rating" data-rating="0">
                        <span class="star" data-value="1">&#9733;</span>
                        <span class="star" data-value="2">&#9733;</span>
                        <span class="star" data-value="3">&#9733;</span>
                        <span class="star" data-value="4">&#9733;</span>
                        <span class="star" data-value="5">&#9733;</span>
                    </div>
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-2xl font-bold text-blue-600">Rp 250.000</span>
                        <span class="text-sm text-gray-500 line-through">Rp 300.000</span>
                    </div>
                    <p class="text-red-600 font-semibold text-sm mb-2">Produk Habis</p>
                    <button class="w-full bg-gray-400 text-white py-2 px-4 rounded-lg cursor-not-allowed font-medium" disabled>
                        Produk Habis
                    </button>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg overflow-hidden transform transition duration-300 hover:scale-105 hover:shadow-xl">
                <img src="https://placehold.co/600x400/D1E7DD/000000?text=Kosong" alt="Kosong 2" class="w-full h-48 object-cover">
                <div class="p-5">
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Kosong 2</h3>
                    <p class="text-gray-600 text-sm mb-3">-----</p>
                    <div class="flex items-center justify-center text-yellow-400 text-2xl mb-2 star-rating" data-rating="0">
                        <span class="star" data-value="1">&#9733;</span>
                        <span class="star" data-value="2">&#9733;</span>
                        <span class="star" data-value="3">&#9733;</span>
                        <span class="star" data-value="4">&#9733;</span>
                        <span class="star" data-value="5">&#9733;</span>
                    </div>
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-2xl font-bold text-blue-600">Rp 120.000</span>
                        <span class="text-sm text-gray-500 line-through">Rp 180.000</span>
                    </div>
                    <p class="text-red-600 font-semibold text-sm mb-2">Produk Habis</p>
                    <button class="w-full bg-gray-400 text-white py-2 px-4 rounded-lg cursor-not-allowed font-medium" disabled>
                        Produk Habis
                    </button>
                </div>
            </div>
        </div>
    </main>

    <section id="payment" class="bg-blue-700 text-white py-12 md:py-16 mt-12 rounded-xl mx-auto container px-6 md:px-8 lg:px-10">
        <h2 class="text-3xl font-bold text-center mb-8">Metode Pembayaran</h2>
        <div class="flex flex-wrap justify-center items-center gap-8">
            <div class="bg-white p-4 rounded-lg shadow-md w-32 h-20 flex flex-col items-center justify-center text-center">
                <img src="https://upload.wikimedia.org/wikipedia/commons/5/52/Dana_logo.png" alt="DANA Logo" class="max-w-full h-12 object-contain">
                <p class="text-gray-800 text-xs mt-1">085773105536</p>
            </div>
            <div class="bg-white p-4 rounded-lg shadow-md w-32 h-20 flex flex-col items-center justify-center text-center">
                <img src="https://upload.wikimedia.org/wikipedia/commons/0/00/Logo_Gopay.svg" alt="GoPay Logo" class="max-w-full h-12 object-contain">
                <p class="text-gray-800 text-xs mt-1">085773105536</p>
            </div>
            <div class="bg-white p-4 rounded-lg shadow-md w-32 h-20 flex flex-col items-center justify-center text-center">
                <img src="https://upload.wikimedia.org/wikipedia/commons/e/eb/Logo_ovo_purple.svg" alt="OVO Logo" class="max-w-full h-12 object-contain">
                <p class="text-gray-800 text-xs mt-1">085773105536</p>
            </div>
        </div>
    </section>

    <section id="qris-payment-section" class="container mx-auto p-6 md:p-8 lg:p-10 mt-12 bg-white rounded-xl shadow-lg text-center">
        <h2 class="text-3xl font-bold text-gray-800 mb-6">Pembayaran via QRIS</h2>
        <p class="text-gray-700 mb-6 max-w-2xl mx-auto">
            Nikmati kemudahan pembayaran dengan QRIS. Scan kode QR di bawah ini menggunakan aplikasi pembayaran favorit Anda.
        </p>
        <div class="flex justify-center items-center bg-gray-100 p-6 rounded-lg w-fit mx-auto shadow-inner">
            <a href="https://ibb.co/nGTD4R2" target="_blank" rel="noopener noreferrer" class="block border-2 border-blue-500 rounded-md overflow-hidden">
                <img src="https://i.ibb.co/nGTD4R2/0a25f6d65c7cff8085892e462853c849bc194c4a1263f1ab1abab347597ee0d4-5326.png"
                     alt="QRIS Code for RAPZ STORE"
                     class="w-48 h-48 object-contain">
            </a>
        </div>
        <p class="text-gray-500 text-sm mt-4">Pastikan nominal pembayaran sesuai dengan total belanja Anda.</p>
    </section>

    <div id="custom-message-box" class="overlay-common fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center hidden">
        <div class="bg-white p-6 rounded-lg shadow-xl text-center max-w-sm w-full mx-4">
            <h3 id="message-box-title" class="text-xl font-bold text-gray-800 mb-4">Pesan</h3>
            <p id="message-box-content" class="text-gray-700 mb-6">Isi pesan di sini.</p>
            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                Tutup
            </button>
        </div>
    </div>

    <div id="cart-page-overlay" class="overlay-common fixed inset-0 bg-gray-100 z-50 flex flex-col pt-16 pb-8">
        <div class="container mx-auto p-6 md:p-8 lg:p-10 bg-white rounded-xl shadow-lg flex-grow overflow-y-auto">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800">Keranjang Belanja Anda</h2>
                <button id="close-cart-page" class="text-gray-600 hover:text-gray-900 text-4xl focus:outline-none" aria-label="Tutup Keranjang Belanja">
                    &times;
                </button>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2">
                    <div id="cart-items-container" class="space-y-6">
                        </div>
                    <p id="empty-cart-message" class="text-gray-600 text-center mt-8 hidden">Keranjang Anda saat ini kosong. Silakan jelajahi produk kami!</p>
                </div>

                <div class="lg:col-span-1 bg-gray-50 p-6 rounded-xl shadow-md h-fit">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Ringkasan Belanja</h3>
                    <div class="space-y-2 text-gray-700">
                        <div class="flex justify-between">
                            <span>Subtotal:</span>
                            <span id="cart-subtotal" class="font-semibold">Rp 0</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Ongkos Kirim:</span>
                            <span id="cart-shipping" class="font-semibold">Rp 0</span>
                        </div>
                        <div class="flex justify-between text-lg font-bold border-t pt-2 mt-2 border-gray-200">
                            <span>Total:</span>
                            <span id="cart-total" class="text-blue-600">Rp 0</span>
                        </div>
                    </div>
                    <button id="proceed-to-payment-selection" class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition duration-300 font-bold mt-6">
                        Lanjutkan Pembayaran
                    </button>
                    <button id="continue-shopping" class="w-full bg-gray-200 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-300 transition duration-300 font-medium mt-3">
                        Lanjutkan Belanja
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="product-action-overlay" class="overlay-common fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex flex-col items-center justify-center hidden">
        <div class="bg-white p-8 rounded-xl shadow-lg text-center max-w-sm w-full mx-4">
            <div class="flex justify-end">
                <button id="close-product-action-overlay" class="text-gray-600 hover:text-gray-900 text-3xl focus:outline-none" aria-label="Tutup Pilihan Produk">
                    &times;
                </button>
            </div>
            <h3 class="text-2xl font-bold text-gray-800 mb-6">Pilihan Produk</h3>
            <img id="product-action-image" src="https://placehold.co/150x150/D1E7DD/000000?text=Produk" alt="Product Image" class="w-32 h-32 object-cover rounded-md mx-auto mb-4">
            <p id="product-action-name" class="text-xl font-semibold text-gray-800 mb-2">Nama Produk</p>
            <p id="product-action-price" class="text-blue-600 font-bold text-lg mb-6">Rp 0</p>

            <button id="product-action-add-to-cart" class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition duration-300 font-bold mb-3">
                Tambahkan Ke Keranjang
            </button>
            <button id="product-action-buy-now" class="w-full bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 transition duration-300 font-bold">
                Langsung Bayar
            </button>
        </div>
    </div>


    <footer class="bg-gray-900 text-white py-8 mt-12 rounded-t-xl">
        <div class="container mx-auto text-center px-4">
            <p class="text-sm mb-2">&copy; 2025 Denzzy Store. Hak Cipta Dilindungi Undang-Undang.</p>
            <p class="text-xs text-gray-400">Dibuat dengan semangat.</p>
            <div class="flex justify-center space-x-4 mt-4">
                <a href="https://wa.me/6285773105536" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition duration-300">Whatsapp</a>
                <a href="https://instagram.com/denzsukaikan" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition duration-300">Instagram</a>
            </div>
        </div>
    </footer>

    <script>
        // Global state for cart items
        let cartItems = [];
        let countdownInterval; // To store the interval for the countdown timer

        // --- Utility Functions for Overlay Management ---
        function showOverlay(overlayElement) {
            // Add a check to ensure overlayElement is not null
            if (overlayElement) {
                overlayElement.classList.remove('hidden');
                setTimeout(() => {
                    overlayElement.classList.add('active');
                    document.body.style.overflow = 'hidden'; // Prevent body scroll
                }, 10);
            } else {
                console.error("Error: Overlay element is null in showOverlay function.");
            }
        }

        function hideOverlay(overlayElement) {
            // Add a check to ensure overlayElement is not null
            if (overlayElement) {
                overlayElement.classList.remove('active');
                setTimeout(() => {
                    overlayElement.classList.add('hidden');
                    document.body.style.overflow = ''; // Restore body scroll
                    clearInterval(countdownInterval); // Clear any active countdown
                }, 300); // Match CSS transition duration
            } else {
                console.error("Error: Overlay element is null in hideOverlay function.");
            }
        }

        // --- Custom Message Box Functions ---
        let customMessageBox;
        let messageBoxTitle;
        let messageBoxContent;
        let closeMessageBoxButton;

        function showCustomMessageBox(title, message) {
            if (customMessageBox && messageBoxTitle && messageBoxContent) {
                messageBoxTitle.textContent = title;
                messageBoxContent.textContent = message;
                showOverlay(customMessageBox);
            }
        }

        function hideCustomMessageBox() {
            if (customMessageBox) {
                hideOverlay(customMessageBox);
            }
        }
        // --- End Custom Message Box Functions ---


        // --- Cart Management Functions ---

        // Calculates subtotal, shipping, and total for the cart
        function calculateCartTotals() {
            let subtotal = 0;
            cartItems.forEach(item => {
                subtotal += item.price * item.quantity;
            });
            // Example shipping: Rp 20.000 if cart is not empty, else Rp 0
            const shipping = subtotal > 0 ? 0 : 0; // Set shipping to 0 as requested
            const total = subtotal + shipping;
            return { subtotal, shipping, total };
        }

        // Renders (updates) the cart display in the overlay
        function renderCart() {
            const cartItemsContainer = document.getElementById('cart-items-container');
            const emptyCartMessage = document.getElementById('empty-cart-message');
            const subtotalSpan = document.getElementById('cart-subtotal');
            const shippingSpan = document.getElementById('cart-shipping');
            const totalSpan = document.getElementById('cart-total');

            if (!cartItemsContainer || !emptyCartMessage || !subtotalSpan || !shippingSpan || !totalSpan) {
                console.error("One or more cart display elements are missing.");
                return;
            }

            cartItemsContainer.innerHTML = ''; // Clear existing items

            if (cartItems.length === 0) {
                emptyCartMessage.classList.remove('hidden');
            } else {
                emptyCartMessage.classList.add('hidden');
                cartItems.forEach(item => {
                    const itemHtml = `
                        <div class="flex items-center bg-gray-50 p-4 rounded-lg shadow-sm">
                            <img src="${item.image}" alt="${item.name}" class="w-24 h-24 object-cover rounded-md mr-4">
                            <div class="flex-grow">
                                <h3 class="text-lg font-semibold text-gray-800">${item.name}</h3>
                                <p class="text-blue-600 font-bold mt-1">Rp ${item.price.toLocaleString('id-ID')}</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button class="bg-gray-200 text-gray-700 px-3 py-1 rounded-md hover:bg-gray-300 decrease-quantity" data-product-id="${item.id}">-</button>
                                <input type="number" value="${item.quantity}" min="1" class="w-12 text-center border rounded-md p-1 quantity-input" data-product-id="${item.id}" readonly>
                                <button class="bg-gray-200 text-gray-700 px-3 py-1 rounded-md hover:bg-gray-300 increase-quantity" data-product-id="${item.id}">+</button>
                            </div>
                            <button class="text-red-500 hover:text-red-700 ml-4 focus:outline-none remove-item" data-product-id="${item.id}" aria-label="Hapus Item">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                            </button>
                        </div>
                    `;
                    cartItemsContainer.insertAdjacentHTML('beforeend', itemHtml);
                });

                // Add event listeners for new buttons (quantity and remove)
                cartItemsContainer.querySelectorAll('.increase-quantity').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const productId = e.currentTarget.dataset.productId;
                        updateCartQuantity(productId, 1);
                    });
                });
                cartItemsContainer.querySelectorAll('.decrease-quantity').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const productId = e.currentTarget.dataset.productId;
                        updateCartQuantity(productId, -1);
                    });
                });
                cartItemsContainer.querySelectorAll('.remove-item').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const productId = e.currentTarget.dataset.productId;
                        removeFromCart(productId);
                    });
                });
            }

            const totals = calculateCartTotals();
            subtotalSpan.textContent = `Rp ${totals.subtotal.toLocaleString('id-ID')}`;
            shippingSpan.textContent = `Rp ${totals.shipping.toLocaleString('id-ID')}`;
            totalSpan.textContent = `Rp ${totals.total.toLocaleString('id-ID')}`;
        }

        // Adds a product to the cart or increments its quantity
        function addToCart(product) {
            const existingItem = cartItems.find(item => item.id === product.id);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cartItems.push({ ...product, quantity: 1 });
            }
            renderCart(); // Re-render the cart display
        }

        // Updates the quantity of a specific product in the cart
        function updateCartQuantity(productId, change) {
            const item = cartItems.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId); // Remove if quantity drops to 0 or less
                } else {
                    renderCart(); // Re-render the cart display
                }
            }
        }

        // Removes a product from the cart
        function removeFromCart(productId) {
            cartItems = cartItems.filter(item => item.id !== productId);
            renderCart(); // Re-render the cart display
        }

        // --- Countdown Timer Function ---
        function startCountdown(durationInSeconds, displayElementId, onCompleteCallback) {
            let timer = durationInSeconds;
            const display = document.getElementById(displayElementId);

            clearInterval(countdownInterval); // Clear any previous interval
            countdownInterval = setInterval(() => {
                const minutes = Math.floor(timer / 60);
                const seconds = timer % 60;

                if (display) { // Check if display element exists
                    display.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }


                if (--timer < 0) {
                    clearInterval(countdownInterval);
                    if (display) { // Check if display element exists
                        display.textContent = "Waktu Habis";
                    }
                    if (onCompleteCallback) {
                        onCompleteCallback(); // Call the callback when countdown finishes
                    }
                }
            }, 1000);
        }

        // --- Rating Functionality ---
        function initializeStarRatings(containerSelector = '.star-rating') {
            document.querySelectorAll(containerSelector).forEach(ratingContainer => {
                const stars = ratingContainer.querySelectorAll('.star');
                let currentRating = parseInt(ratingContainer.dataset.rating || '0');

                // Function to update star display
                const updateStars = (rating) => {
                    stars.forEach((star, index) => {
                        if (index < rating) {
                            star.classList.add('filled');
                        } else {
                            star.classList.remove('filled');
                        }
                    });
                };

                // Initial display based on data-rating
                updateStars(currentRating);

                stars.forEach(star => {
                    star.addEventListener('mouseover', (e) => {
                        const value = parseInt(e.target.dataset.value);
                        updateStars(value);
                    });

                    star.addEventListener('mouseout', () => {
                        updateStars(currentRating); // Revert to current rating on mouse out
                    });

                    star.addEventListener('click', (e) => {
                        const value = parseInt(e.target.dataset.value);
                        currentRating = value; // Update the stored rating
                        ratingContainer.dataset.rating = currentRating; // Update data attribute
                        updateStars(currentRating); // Ensure display is correct
                        console.log(`Produk diberi rating: ${currentRating} bintang`);
                        // Di sini Anda bisa mengirim rating ke server jika ada backend
                    });
                });
            });
        }


        // --- Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const closeMobileMenuButton = document.getElementById('close-mobile-menu');
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');

            const cartIcon = document.getElementById('cart-icon');
            const desktopCartLink = document.getElementById('desktop-cart-link');
            const mobileCartLink = document.getElementById('mobile-cart-link');
            const cartPageOverlay = document.getElementById('cart-page-overlay');
            const closeCartPageButton = document.getElementById('close-cart-page');
            const proceedToPaymentSelectionButton = document.getElementById('proceed-to-payment-selection');
            const continueShoppingButton = document.getElementById('continue-shopping');

            const paymentSelectionOverlay = document.getElementById('payment-selection-overlay');
            const closePaymentSelectionButton = document.getElementById('close-payment-selection');
            const selectQrisButton = document.getElementById('select-qris');
            const selectDanaButton = document.getElementById('select-dana');
            const selectOvoButton = document.getElementById('select-ovo');
            const selectGopayButton = document.getElementById('select-gopay'); // Corrected declaration

            const qrisPaymentOverlay = document.getElementById('qris-payment-overlay');
            const closeQrisPaymentButton = document.getElementById('close-qris-payment');
            const qrisTotalAmountSpan = document.getElementById('qris-total-amount');
            const confirmQrisPaymentButton = document.getElementById('confirm-qris-payment');

            const danaPaymentOverlay = document.getElementById('dana-payment-overlay');
            const closeDanaPaymentButton = document.getElementById('close-dana-payment');
            const danaTotalAmountSpan = document.getElementById('dana-total-amount');
            const confirmDanaPaymentButton = document.getElementById('confirm-dana-payment');

            const ovoPaymentOverlay = document.getElementById('ovo-payment-overlay');
            const closeOvoPaymentButton = document.getElementById('close-ovo-payment'); // Corrected declaration
            const ovoTotalAmountSpan = document.getElementById('ovo-total-amount');
            const confirmOvoPaymentButton = document.getElementById('confirm-ovo-payment');

            const gopayPaymentOverlay = document.getElementById('gopay-payment-overlay');
            const closeGopayPaymentButton = document.getElementById('close-gopay-payment'); // Corrected declaration
            const gopayTotalAmountSpan = document.getElementById('gopay-total-amount');
            const confirmGopayPaymentButton = document.getElementById('confirm-gopay-payment');

            const paymentSuccessOverlay = document.getElementById('payment-success-overlay');
            const whatsappAdminButton = document.getElementById('whatsapp-admin-button');
            const closePaymentSuccessButton = document.getElementById('close-payment-success');

            const ratingCommentOverlay = document.getElementById('rating-comment-overlay');
            const submitRatingButton = document.getElementById('submit-rating-button');
            const skipRatingButton = document.getElementById('skip-rating-button');
            const ratingCommentInput = document.getElementById('rating-comment-input');

            const productActionOverlay = document.getElementById('product-action-overlay');
            const closeProductActionOverlayButton = document.getElementById('close-product-action-overlay');
            const productActionImage = document.getElementById('product-action-image');
            const productActionName = document.getElementById('product-action-name');
            const productActionPrice = document.getElementById('product-action-price');
            const productActionAddToCartButton = document.getElementById('product-action-add-to-cart');
            const productActionBuyNowButton = document.getElementById('product-action-buy-now');


            const desktopNavLinks = document.querySelectorAll('.desktop-nav-link');
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
            const addToCartButtons = document.querySelectorAll('.add-to-cart-button');

            const splashScreen = document.getElementById('splash-screen');

            // Initialize custom message box elements
            customMessageBox = document.getElementById('custom-message-box');
            if (customMessageBox) { // Check if element exists before getting its children
                messageBoxTitle = document.getElementById('message-box-title');
                messageBoxContent = document.getElementById('message-box-content');
                closeMessageBoxButton = document.getElementById('close-message-box');

                if (closeMessageBoxButton) {
                    closeMessageBoxButton.addEventListener('click', hideCustomMessageBox);
                }
            }


            // Event Listener for Mobile Menu
            if (mobileMenuButton) {
                mobileMenuButton.addEventListener('click', () => {
                    showOverlay(mobileMenuOverlay);
                });
            }

            if (closeMobileMenuButton) {
                closeMobileMenuButton.addEventListener('click', () => {
                    hideOverlay(mobileMenuOverlay);
                });
            }

            mobileNavLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    if (link.getAttribute('href') && link.getAttribute('href').startsWith('#')) {
                        e.preventDefault();
                        const targetId = link.getAttribute('href').substring(1);
                        const targetElement = document.getElementById(targetId);
                        if (targetElement) {
                            targetElement.scrollIntoView({ behavior: 'smooth' });
                        }
                    }
                    hideOverlay(mobileMenuOverlay);
                });
            });

            // Event Listener for Cart Page
            if (cartIcon) {
                cartIcon.addEventListener('click', (e) => {
                    e.preventDefault();
                    renderCart(); // Render cart before showing
                    showOverlay(cartPageOverlay);
                });
            }

            if (desktopCartLink) {
                desktopCartLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    renderCart(); // Render cart before showing
                    showOverlay(cartPageOverlay);
                });
            }

            if (mobileCartLink) {
                mobileCartLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    hideOverlay(mobileMenuOverlay); // Close mobile menu if open
                    renderCart(); // Render cart before showing
                    showOverlay(cartPageOverlay);
                });
            }

            if (closeCartPageButton) {
                closeCartPageButton.addEventListener('click', () => {
                    hideOverlay(cartPageOverlay);
                });
            }

            if (continueShoppingButton) {
                continueShoppingButton.addEventListener('click', () => {
                    hideOverlay(cartPageOverlay);
                });
            }

            // Event Listener for "Lanjutkan Pembayaran" button in Cart
            if (proceedToPaymentSelectionButton) {
                proceedToPaymentSelectionButton.addEventListener('click', () => {
                    const totals = calculateCartTotals();
                    if (totals.total === 0) {
                        showCustomMessageBox("Keranjang Kosong", "Keranjang Anda kosong. Tambahkan produk untuk melanjutkan pembayaran.");
                        return;
                    }
                    hideOverlay(cartPageOverlay);
                    showOverlay(paymentSelectionOverlay);
                });
            }


            // Event Listener for Payment Selection Overlay
            if (closePaymentSelectionButton) {
                closePaymentSelectionButton.addEventListener('click', () => {
                    hideOverlay(paymentSelectionOverlay);
                });
            }

            // Functions to handle payment selection and show detail overlay
            const handlePaymentSelection = (overlayToShow, totalAmountSpan, countdownId) => {
                hideOverlay(paymentSelectionOverlay);
                const totals = calculateCartTotals();
                if (totalAmountSpan) {
                    totalAmountSpan.textContent = `Rp ${totals.total.toLocaleString('id-ID')}`;
                }
                startCountdown(1800, countdownId, () => {
                    // Callback when countdown finishes (simulates payment completion)
                    hideOverlay(overlayToShow);
                    showOverlay(paymentSuccessOverlay);
                }); // 30 minutes countdown
                showOverlay(overlayToShow);
            };

            if (selectQrisButton) {
                selectQrisButton.addEventListener('click', () => handlePaymentSelection(qrisPaymentOverlay, qrisTotalAmountSpan, 'qris-countdown'));
            }
            if (selectDanaButton) {
                selectDanaButton.addEventListener('click', () => handlePaymentSelection(danaPaymentOverlay, danaTotalAmountSpan, 'dana-countdown'));
            }
            if (selectOvoButton) {
                selectOvoButton.addEventListener('click', () => handlePaymentSelection(ovoPaymentOverlay, ovoTotalAmountSpan, 'ovo-countdown'));
            }
            if (selectGopayButton) {
                selectGopayButton.addEventListener('click', () => handlePaymentSelection(gopayPaymentOverlay, gopayTotalAmountSpan, 'gopay-countdown'));
            }

            // "Konfirmasi Pembayaran" buttons on detail overlays
            const handleConfirmPayment = (currentPaymentOverlay) => {
                hideOverlay(currentPaymentOverlay);
                showOverlay(paymentSuccessOverlay);
            };

            if (confirmQrisPaymentButton) {
                confirmQrisPaymentButton.addEventListener('click', () => handleConfirmPayment(qrisPaymentOverlay));
            }
            if (confirmDanaPaymentButton) {
                confirmDanaPaymentButton.addEventListener('click', () => handleConfirmPayment(danaPaymentOverlay));
            }
            if (confirmOvoPaymentButton) {
                confirmOvoPaymentButton.addEventListener('click', () => handleConfirmPayment(ovoPaymentOverlay));
            }
            if (confirmGopayPaymentButton) {
                confirmGopayPaymentButton.addEventListener('click', () => handleConfirmPayment(gopayPaymentOverlay));
            }


            // Close buttons for payment detail overlays
            if (closeQrisPaymentButton) {
                closeQrisPaymentButton.addEventListener('click', () => {
                    hideOverlay(qrisPaymentOverlay);
                });
            }
            if (closeDanaPaymentButton) {
                closeDanaPaymentButton.addEventListener('click', () => {
                    hideOverlay(danaPaymentOverlay);
                });
            }
            if (closeOvoPaymentButton) { // Corrected usage
                closeOvoPaymentButton.addEventListener('click', () => {
                    hideOverlay(ovoPaymentOverlay);
                });
            }
            if (closeGopayPaymentButton) { // Corrected usage
                closeGopayPaymentButton.addEventListener('click', () => {
                    hideOverlay(gopayPaymentOverlay);
                });
            }

            // Event Listener for Payment Success Overlay
            if (whatsappAdminButton) {
                whatsappAdminButton.addEventListener('click', () => {
                    window.open('https://wa.me/6285773105536', '_blank');
                });
            }

            if (closePaymentSuccessButton) {
                closePaymentSuccessButton.addEventListener('click', () => {
                    hideOverlay(paymentSuccessOverlay);
                    showOverlay(ratingCommentOverlay); // Show rating modal after success is closed
                });
            }

            // Event Listener for Rating and Comment Overlay
            if (submitRatingButton) {
                submitRatingButton.addEventListener('click', () => {
                    const currentRatingContainer = document.querySelector('.store-rating');
                    const currentRating = currentRatingContainer ? currentRatingContainer.dataset.rating : '0';
                    const comment = ratingCommentInput ? ratingCommentInput.value.trim() : '';
                    console.log(`Rating Toko: ${currentRating} bintang`);
                    console.log(`Komentar: ${comment}`);
                    showCustomMessageBox("Rating Terkirim", "Terima kasih atas rating dan komentar Anda!");
                    hideOverlay(ratingCommentOverlay);
                });
            }

            if (skipRatingButton) {
                skipRatingButton.addEventListener('click', () => {
                    hideOverlay(ratingCommentOverlay);
                });
            }

            // Event Listener for desktop navigation links to scroll smoothly
            desktopNavLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    if (link.getAttribute('href') && link.getAttribute('href').startsWith('#')) {
                        e.preventDefault();
                        const targetId = link.getAttribute('href').substring(1);
                        const targetElement = document.getElementById(targetId);
                        if (targetElement) {
                            targetElement.scrollIntoView({ behavior: 'smooth' });
                        }
                    }
                });
            });

            // Event Listener for "Tambah ke Keranjang" buttons to show product action overlay
            addToCartButtons.forEach(button => {
                // Check if the button is disabled (e.g., "Produk Habis")
                if (button.disabled) {
                    return; // Skip adding event listener for disabled buttons
                }

                button.addEventListener('click', (e) => {
                    const productId = e.currentTarget.dataset.productId;
                    const productName = e.currentTarget.dataset.productName;
                    const productPrice = parseFloat(e.currentTarget.dataset.productPrice);
                    const productImage = e.currentTarget.dataset.productImage;

                    // Populate product action overlay
                    if (productActionImage) productActionImage.src = productImage;
                    if (productActionImage) productActionImage.alt = productName;
                    if (productActionName) productActionName.textContent = productName;
                    if (productActionPrice) productActionPrice.textContent = `Rp ${productPrice.toLocaleString('id-ID')}`;

                    // Set up buttons in the product action overlay
                    if (productActionAddToCartButton) {
                        productActionAddToCartButton.onclick = () => {
                            addToCart({ id: productId, name: productName, price: productPrice, image: productImage });
                            hideOverlay(productActionOverlay);
                            renderCart(); // Render cart to show newly added item
                            showOverlay(cartPageOverlay); // Show cart after adding
                        };
                    }

                    if (productActionBuyNowButton) {
                        productActionBuyNowButton.onclick = () => {
                            // Clear cart and add only this product, then proceed to payment
                            cartItems = [{ id: productId, name: productName, price: productPrice, image: productImage, quantity: 1 }];
                            renderCart(); // Update cart display with only this item
                            hideOverlay(productActionOverlay);
                            showOverlay(paymentSelectionOverlay);
                        };
                    }

                    showOverlay(productActionOverlay);
                });
            });

            if (closeProductActionOverlayButton) {
                closeProductActionOverlayButton.addEventListener('click', () => {
                    hideOverlay(productActionOverlay);
                });
            }


            // Initial render of the cart (will show empty)
            renderCart();
            initializeStarRatings(); // Initialize product rating functionality
            initializeStarRatings('.store-rating'); // Initialize store rating functionality


            // --- Splash Screen Logic ---
            // Hide splash screen after content is loaded or a timeout
            window.addEventListener('load', () => {
                setTimeout(() => {
                    if (splashScreen) {
                        splashScreen.classList.add('hidden');
                        document.body.style.overflow = ''; // Restore body scroll after splash screen
                    }
                }, 1500); // 1.5 second delay for splash screen
            });
        });
    </script>
</body>
</html>
